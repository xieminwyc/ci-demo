name: CD to WSL

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      # 1ï¸âƒ£ æ‹‰å–ä»“åº“ä»£ç 
      - name: Checkout code
        uses: actions/checkout@v4

      # 2ï¸âƒ£ æµ‹è¯• workflow æ˜¯å¦è¿è¡Œ
      - name: Say hello
        run: echo "ğŸ‰ GitHub Actions is running"

      # 3ï¸âƒ£ SSH éƒ¨ç½²åˆ° WSL
      - name: Deploy to WSL
        uses: appleboy/ssh-action@v0.1.7
        with:
          host: 127.0.0.1       # WSL æœ¬æœº localhost
          username: xm          # WSL ç”¨æˆ·å
          key: ${{ secrets.WSL_SSH_KEY }}
          port: 2222            # SSH ç«¯å£è½¬å‘ï¼ˆWindows PowerShell è®¾ç½®ï¼‰
          script: |
            cd /home/xm/ci-demo
            git pull
            npm install
            npm run build

